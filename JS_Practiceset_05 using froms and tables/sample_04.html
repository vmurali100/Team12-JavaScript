<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Document</title>
  <style>
    form {
      margin: 0;
      padding: 0;
    }

    #updateBtn {
      display: none;
    }
  </style>
</head>

<body>
    <h3>User Registration :</h3>
  <hr />
      <label for="Username">Username :</label>
      <input type="text" name="" id="urname" placeholder="Enter your name" /><br /><br />
      <label for="EmailUser">UserEmail :</label>
      <input type="email" name="" id="email" /><br /><br />
      <label for="Password">Password :</label>
      <input type="password" name="" id="pass" /><br /><br />
      <label for="FirstName">FristName :</label>
      <input type="text" name="" id="fname" /><br /><br />
      <label for="LastName">LastName :</label>
      <input type="text" name="" id="lname" /><br /><br />
      <label for="Userurlfield">Userurlfield :</label>
      <input type="url" name="" id="usfiedl" /><br /><br />
      <label for="Usernickname">Usernickname :</label>
      <input type="text" name="" id="urnick" /><br /><br />
      <label for="Userdescription">Userdescription :</label>
      <input type="text" name="" id="urserdis" /><br /><br />
      <button onclick="createuser()" type="button" id="createBtn">
        Create User</button><br /><br />
      <button onclick="updateUser()" type="button" id="updateBtn">
        Update User</button><br /><br />
  </form>
  <hr />
  <table border="1">
    <thead>
      <tr>
        <th>User Name</th>
        <th>User Email</th>
        <th>Password</th>
        <th>Frist Name</th>
        <th>Last Name</th>
        <th>User url field</th>
        <th>Usernickname</th>
        <th>Userdescription</th>
        <th>Edit</th>
        <th>Delete</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
  <script>
    var allUsers = [];
    var gindex = null;
    function createuser() {
      var user = {
        Username: document.getElementById("urname").value,
        UserEmail: document.getElementById("email").value,
        Password: document.getElementById("pass").value,
        FristName: document.getElementById("fname").value,
        LastName: document.getElementById("lname").value,
        Userurlfield: document.getElementById("usfiedl").value,
        Usernickname: document.getElementById("urnick").value,
        Userdescription: document.getElementById("urserdis").value,
      };
      clearform();
      allUsers.push(user);
      displayUsers(allUsers);
    }
    function clearform() {
      document.getElementById("urname").value = "";
      document.getElementById("email").value = "";
      document.getElementById("pass").value = "";
      document.getElementById("fname").value = "";
      document.getElementById("lname").value = "";
      document.getElementById("usfiedl").value = "";
      document.getElementById("urnick").value = "";
      document.getElementById("urserdis").value = "";
    }
    function displayUsers(users) {
      document.querySelector("tbody").innerHTML = "";
      users.forEach((user, i) => {
        var myTr = document.createElement("tr");
        var mytd1 = document.createElement("td");
        mytd1.innerHTML = user.Username;
        var mytd2 = document.createElement("td");
        mytd2.innerHTML = user.UserEmail;
        var mytd3 = document.createElement("td");
        mytd3.innerHTML = user.Password;
        var mytd4 = document.createElement("td");
        mytd4.innerHTML = user.FristName;
        var mytd5 = document.createElement("td");
        mytd5.innerHTML = user.LastName;
        var mytd6 = document.createElement("td");
        mytd6.innerHTML = user.Userurlfield;
        var mytd7 = document.createElement("td");
        mytd7.innerHTML = user.Usernickname;
        var mytd8 = document.createElement("td");
        mytd8.innerHTML = user.Userdescription;

        myTr.appendChild(mytd1);
        myTr.appendChild(mytd2);
        myTr.appendChild(mytd3);
        myTr.appendChild(mytd4);
        myTr.appendChild(mytd5);
        myTr.appendChild(mytd6);
        myTr.appendChild(mytd7);
        myTr.appendChild(mytd8);

        var editTd = document.createElement("td");
        var editBtn = document.createElement("button");
        editBtn.innerHTML = "Edit";
        editBtn.setAttribute("onclick", "editUser(" + i + ")");

        editTd.appendChild(editBtn);
        var deleteTd = document.createElement("td");
        var deleteBtn = document.createElement("button");
        deleteBtn.innerHTML = "Delete";
        deleteBtn.setAttribute("onclick", "deleteUser(" + i + ")");
        deleteTd.appendChild(deleteBtn);
        myTr.appendChild(editTd);
        myTr.appendChild(deleteTd);
        document.querySelector("tbody").appendChild(myTr);
      });
    }
    function deleteUser(i) {
      var latestUsers = allUsers.filter(function (user, index) {
        return i !== index;
      });
      console.log(latestUsers);
      displayUsers(latestUsers);
    }

    function editUser(i) {
      console.log(i);
      gindex = i;
      document.getElementById("urname").value = allUsers[i].Username;
      document.getElementById("email").value = allUsers[i].UserEmail;
      document.getElementById("pass").value = allUsers[i].Password;
      document.getElementById("fname").value = allUsers[i].FristName;
      document.getElementById("lname").value = allUsers[i].LastName;
      document.getElementById("usfiedl").value = allUsers[i].Userurlfield;
      document.getElementById("urnick").value = allUsers[i].Usernickname;
      document.getElementById("urserdis").value = allUsers[i].Userdescription;
      document.getElementById("createBtn").style.display = "none";
      document.getElementById("updateBtn").style.display = "block";
    }
    function updateUser() {
      var user = {
        Username: document.getElementById("urname").value,
        UserEmail: document.getElementById("email").value,
        Password: document.getElementById("pass").value,
        FristName: document.getElementById("fname").value,
        LastName: document.getElementById("lname").value,
        Userurlfield: document.getElementById("usfiedl").value,
        Usernickname: document.getElementById("urnick").value,
        Userdescription: document.getElementById("urserdis").value,
      };
      allUsers[gindex] = user;

      displayUsers(allUsers);
      clearform();
      document.getElementById("createBtn").style.display = "block";
      document.getElementById("updateBtn").style.display = "none";
    }
    displayUsers(allUsers)
  </script>
</body>

</html>