var postuser = new XMLHttpRequest()
postuser.onreadystatechange=function(){
    if(postuser.readyState == 4 && postuser.status == 201){
        console.log("User add successfully");
    }
}
postuser.open("POST",api_url)
postuser.setRequestHeader("Content-Type","application/json")
postuser.send(JSON.stringify(users))
console.log(users);
}
function getuserdata(){
var getuser=new XMLHttpRequest()
getuser.onreadystatechange=function(){
    if(getuser.readyState == 4 && getuser.status ==200){
        console.log(users);
        users=JSON.parse(getuser.response)
        displayUser(users)
    }
}
getuser.open("GET","http://localhost:3000/users")
getuser.send()
}
function displayUser(users){
    document.querySelector("tbody").innerHTML="";
    users.forEach((user,i) => {
        var myTr=document.createElement("tr")
        for(a in user){
            var myTd=document.createElement("td")
            myTd.innerHTML=user[a]
            myTr.appendChild(myTd)
        }
        var EditTd=document.createElement("td")
        var Editbtn=document.createElement("button")
        Editbtn.setAttribute("onclick","Edit("+i+")")
        Editbtn.innerHTML="Edit"
        EditTd.appendChild(Editbtn)
        myTr.appendChild(EditTd)

        var DeleteTd=document.createElement("td")
        var Deletebtn=document.createElement("button")
        Deletebtn.setAttribute("onclick","deleteUser("+i+")")
        Deletebtn.innerHTML="DELETE"
        DeleteTd.appendChild(Deletebtn)
        myTr.appendChild(DeleteTd)


        document.querySelector("tbody").appendChild(myTr)
    });
}
function deleteUser(i){
    console.log("deleteusers");
    window.location.href="delete.html?"+users[i].id
}
getuserdata()