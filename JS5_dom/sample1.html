<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    tbody{
        background-color: rgb(37, 190, 65);
        color: rgb(216, 65, 19);
    }
    button{
        background-color: rgb(220, 188, 6);
    }
    th{
        background-color: rgb(180, 14, 135);
        
    }
    input{
        background-color: rgb(12, 12, 12);
        color: aliceblue;
    }
</style>

<body>
    <h1 style="font-size: 30px;">Create user</h1>
    <hr>
    <form>
        <label for="username">username</label>
        <input type="text" id="username" placeholder="username"><br>
        <label for="email">email</label>
        <input type="text" name="" id="email" placeholder="email"><br>
        <label for="password">password</label>
        <input type="number" name="" id="password" placeholder="password"><br>
        <label for="confirmpassword">confirmpassword</label>
        <input type="number" name="" id="confirmpassword" placeholder="confirmpassword"><br>
        <label for="website">website</label>
        <input type="text" name="" id="website" placeholder="website"><br>
    </form>
    <button onclick="create()" type="button" id="createBtn">create</button>
    <button onclick="update()" type="button" id="updateBtn">update</button>
    <hr>
    <table border="1px">
        <thead>
            <tr>
                <th>username</th>
                <th>password</th>
                <th>confirmpassword</th>
                <th>email</th>
                <th>website</th>
                <th>edit</th>
                <th>delete</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
    <script>
        var allforms = [
            
        ]
        var gindex = null
        function create() {
            var form = {
                username: document.getElementById("username").value,
                password: document.getElementById("password").value,
                confirmpassword: document.getElementById("confirmpassword").value,
                email: document.getElementById("email").value,
                website: document.getElementById("website").value
            }
            console.log("form", form)
            clearform()
            allforms.push(form)
            displayforms(allforms)
        }

        function clearform() {
            document.getElementById("username").value = "",
                document.getElementById("password").value = "",
                document.getElementById("confirmpassword").value = "",
                document.getElementById("email").value = "",
                document.getElementById("website").value = ""
        }

        function displayforms(forms) {
            document.querySelector("tbody").innerHTML = ""
            forms.forEach((form, i) => {
                var myTr = document.createElement("tr");
                var utd = document.createElement("td");
                utd.innerHTML = form.username;
                var ctd = document.createElement("td");
                ctd.innerHTML = form.confirmpassword;
                var ptd = document.createElement("td");
                ptd.innerHTML = form.password;
                var etd = document.createElement("td");
                etd.innerHTML = form.email;
                var wtd = document.createElement("td");
                wtd.innerHTML = form.website;
                myTr.appendChild(utd);
                myTr.appendChild(ctd);
                myTr.appendChild(ptd);
                myTr.appendChild(etd);
                myTr.appendChild(wtd);
                var editTd = document.createElement("td");
                var editBtn = document.createElement("button");
                editBtn.innerHTML = "edit";
                editBtn.setAttribute("onclick", "editform(" + i + ")")
                editTd.appendChild(editBtn);
                var dltTd = document.createElement("td");
                var dltBtn = document.createElement("button");
                dltBtn.innerHTML = "dlt";
                dltBtn.setAttribute("onclick", "dltform( " + i + ")")
                dltTd.appendChild(dltBtn);

                myTr.appendChild(editTd);
                myTr.appendChild(dltTd);

                document.querySelector("tbody").appendChild(myTr)
            });
        }
        function dltform(i) {
            var latestforms = allforms.filter(function (form, index) {
                return i !== index
            })
            console.log(latestforms)
            displayforms(latestforms)
        }

        function editform(i) {
            console.log(i)
            gindex = i;
            document.getElementById("username").value = allforms[i].username
            document.getElementById("password").value = allforms[i].password
            document.getElementById("confirmpassword").value = allforms[i].confirmpassword
            document.getElementById("email").value = allforms[i].email
            document.getElementById("website").value = allforms[i].website
            document.getElementById("updateBtn").style.display = "block"
            document.getElementById("createBtn").style.display = "none"
        }
        function update() {
            var form = {
                username: document.getElementById("username").value,
                password: document.getElementById("password").value,
                confirmpassword: document.getElementById("confirmpassword").value,
                email: document.getElementById("email").value,
                age: document.getElementById("website").value
            }
            allforms[gindex] = form

            displayforms(allforms);
            clearform()
            document.getElementById("updateBtn").style.display = "none"
            document.getElementById("createBtn").style.display = "block"
        }

        displayforms(allforms)
    </Script>
    <br>
    <br>
    
</body>

</html>