<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CREATE USE - CRUD -IN JS</title>
</head>
<style>
    table{
        width: 50%;
        margin: 0 auto;
    }
    input,textarea{
        width: 70%;
        padding: 1%;
        margin: 0.2%;
    }
    #updateBtn{
        display: none;
    }
</style>

<body>
    <div class="container">
        <div class="row text-center">
            <hr>
            <div class="col-md-6 m-auto">
                <form>
                    <table>
                        <tr>
                            <td><label for="usrName">USER NAME</label></td>
                            <td><input type="text" id="UserName" name="" ></td>
                        </tr>
                        <tr>
                            <td><label for="email">EMAIL</label></td>
                            <td><input type="email" id="email" ></td>
                        </tr>
                        <tr>
                            <td><label for="password">PASSWORD</label></td>
                            <td><input type="password" name="password" id="password" ></td>
                        </tr>
                        <tr>
                            <td><label for="Cnf_password">CONFIRM PASSWORD</label></td>
                            <td><input type="password" name="con_password" id="con_password" ></td>
                        </tr>
                        <tr>
                            <td><label for="dName">DISPLAY NAME</label></td>
                            <td><input type="text" name="dName" id="dName" ></td>
                        </tr>
                        <tr>
                            <td><label for="name" id="name">NAME</label></td>
                            <td>
                                <input type="text" id="fName" >
                                <input type="text" id="lName" >
                            </td>
                        </tr>
                        <tr>
                            <td><label for="nickName">NICK NAME</label></td>
                            <td><input type="text" name="nickName" id="nickName" ></td>
                        </tr>
                        <tr>
                            <td><label for="webSite">WEBSITE</label></td>
                            <td><input type="url" name="webSite" id="webSite" ></td>
                        </tr>
                        <tr>
                            <td><label for="bio">BIO</label></td>
                            <td><textarea name="bio" id="bio" cols="5" rows="0" ></textarea></td>
                        </tr>
                        <tr>
                            <td><label for="">FACEBOOK ID</label></td>
                            <td><input type="text" name="" id="fbId" ></td>
                        </tr>
                        <tr>
                            <td><label for="">INSTGRAM ID</label></td>
                            <td><input type="text" name="" id="igID" ></td>
                        </tr>
                        <tr>
                            <td><label for="">TWITTER ID</label></td>
                            <td><input type="text" name="" id="trID" ></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>
                                <button type="button" onclick="createDetails()" id="createBtn">CREATE AND ACCESS</button>
                                <button type="button" onclick="updateUser()"  id="updateBtn">UPDATE USER</button>
                                <br>
                            </td>
                        </tr>
                    </table>
                </form>
            </div>
            <hr><br>
        </div>
        <div class="row">
            <table border="1" id="myUserTable">
                <thead>
                    <tr>
                        <th>USER NAME</th>
                        <th>EMAIL</th>
                        <th>PASSWERD</th>
                        <th>CONFORM PASSWORD</th>
                        <th>DISPLAY NAME</th>
                        <th>FIRST Name</th>
                        <th>LAST NAME</th>
                        <th>NICK NAME</th>
                        <th>WEB SITE</th>
                        <th>BIO</th>
                        <th>FACEBOOK ID</th>
                        <th>INSTAGRAM ID</th>
                        <th>TWITTER ID</th>
                        <th>UPDATE</th>
                        <th>DELETE</th>
                    </tr>
                </thead>
                <tbody id="myTbody">

                </tbody>
            </table>
        </div>
    </div>

    <script>
        var createUserDetils = []
        var gindex=null
        function createDetails() {
            var user = {
                UserName: document.getElementById("UserName").value,
                email: document.getElementById("email").value,
                password: document.getElementById("password").value,
                con_password: document.getElementById("con_password").value,
                dName: document.getElementById("dName").value,
                fName: document.getElementById("fName").value,
                lName: document.getElementById("lName").value,
                nickName: document.getElementById("nickName").value,
                webSite: document.getElementById("webSite").value,
                bio: document.getElementById("bio").value,
                fbId: document.getElementById("fbId").value,
                igID: document.getElementById("igID").value,
                trID: document.getElementById("trID").value
            }
            createUserDetils.push(user)
            displayUserInTable(createUserDetils)
            clearData()
        }
        function clearData() {
            document.getElementById("UserName").value = "",
                document.getElementById("email").value = "",
                document.getElementById("password").value = "",
                document.getElementById("con_password").value = "",
                document.getElementById("dName").value = "",
                document.getElementById("fName").value = "",
                document.getElementById("lName").value = "",
                document.getElementById("nickName").value = "",
                document.getElementById("webSite").value = "",
                document.getElementById("bio").value = "",
                document.getElementById("fbId").value = "",
                document.getElementById("igID").value = "",
                document.getElementById("trID").value = ""
        }
        function displayUserInTable(user) {
            document.getElementById("myTbody").innerHTML = "";
            user.forEach((value,i)=>{
                var myTr = document.createElement("tr");
                var myTd1 = document.createElement("td");
                    myTd1.innerHTML = value.UserName
                        myTr.appendChild(myTd1)
                var myTd2 = document.createElement("td");
                    myTd2.innerHTML = value.email
                        myTr.appendChild(myTd2)
                var myTd3 = document.createElement("td");
                    myTd3.innerHTML = value.password
                        myTr.appendChild(myTd3)
                var myTd4 = document.createElement("td");
                    myTd4.innerHTML = value.con_password
                        myTr.appendChild(myTd4)
                var myTd5 = document.createElement("td");
                    myTd5.innerHTML = value.dName
                        myTr.appendChild(myTd5)
                var myTd6 = document.createElement("td");
                    myTd6.innerHTML = value.fName
                        myTr.appendChild(myTd6)
                var myTd7 = document.createElement("td");
                    myTd7.innerHTML = value.lName
                        myTr.appendChild(myTd7)
                var myTd8 = document.createElement("td");
                    myTd8.innerHTML = value.nickName
                        myTr.appendChild(myTd8)
                var myTd9 = document.createElement("td");
                    myTd9.innerHTML = value.webSite
                        myTr.appendChild(myTd9)
                var myTd10 = document.createElement("td");
                    myTd10.innerHTML = value.bio
                        myTr.appendChild(myTd10)
                var myTd11 = document.createElement("td");
                    myTd11.innerHTML = value.fbId
                        myTr.appendChild(myTd11)
                var myTd12 = document.createElement("td");
                    myTd12.innerHTML = value.igID
                        myTr.appendChild(myTd12)
                var myTd13 = document.createElement("td");
                    myTd13.innerHTML = value.trID
                        myTr.appendChild(myTd13)

                var editTd = document.createElement("td")
                var editButton = document.createElement("button")
                    editButton.innerHTML = "EDIT"
                    editButton.setAttribute("onclick", "editUser("+i+")")
                    editTd.appendChild(editButton)
                myTr.appendChild(editTd)

                var delTd = document.createElement("td")
                var delButton = document.createElement("button")
                    delButton.innerHTML = "DELETE"
                    delButton.setAttribute("onclick", "deleteUser(" + i + ")")
                    delTd.appendChild(delButton)
                myTr.appendChild(delTd)
                document.getElementById("myTbody").appendChild(myTr);
            });
        }
        function deleteUser(i) {
            var latestUsers = createUserDetils.filter(function (user, index) {
                return i !== index
            })
            displayUserInTable(latestUsers)
        }

        function editUser(i) {
            console.log(i)
            gindex = i;
                document.getElementById("UserName").value =createUserDetils[i].UserName,
                document.getElementById("email").value =createUserDetils[i].email,
                document.getElementById("password").value =createUserDetils[i].password,
                document.getElementById("con_password").value =createUserDetils[i].con_password,
                document.getElementById("dName").value =createUserDetils[i].dName,
                document.getElementById("fName").value =createUserDetils[i].fName,
                document.getElementById("lName").value =createUserDetils[i].lName,
                document.getElementById("nickName").value =createUserDetils[i].nickName,
                document.getElementById("webSite").value =createUserDetils[i].webSite,
                document.getElementById("bio").value =createUserDetils[i].bio,
                document.getElementById("fbId").value =createUserDetils[i].fbId,
                document.getElementById("igID").value =createUserDetils[i].igID,
                document.getElementById("trID").value =createUserDetils[i].trID

            document.getElementById("updateBtn").style.display="block";
            document.getElementById("createBtn").style.display="none";
        }

        function updateUser(){
            var user = {
                UserName: document.getElementById("UserName").value,
                email: document.getElementById("email").value,
                password: document.getElementById("password").value,
                con_password: document.getElementById("con_password").value,
                dName: document.getElementById("dName").value,
                fName: document.getElementById("fName").value,
                lName: document.getElementById("lName").value,
                nickName: document.getElementById("nickName").value,
                webSite: document.getElementById("webSite").value,
                bio: document.getElementById("bio").value,
                fbId: document.getElementById("fbId").value,
                igID: document.getElementById("igID").value,
                trID: document.getElementById("trID").value
            }
            createUserDetils[gindex] = user;
            displayUserInTable(createUserDetils);
            clearData()
            document.getElementById("updateBtn").style.display="none";
            document.getElementById("createBtn").style.display="blobk";
        }
        displayUserInTable(createUserDetils)

    </script>
</body>

</html>